name: Deploy homelab

on:
  push:
    branches: ["main"]
  workflow_dispatch: {}

permissions:
  contents: read

concurrency:
  group: deploy-homelab
  cancel-in-progress: false

jobs:
  deploy:
    runs-on: [self-hosted, homelab]
    steps:
      - name: Deploy on server
        run: /opt/homelab/scripts/deploy.sh
